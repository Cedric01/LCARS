@page "/github/pullrequests"

<PageTitle>LCARS | GitHub | Pull Requests</PageTitle>

@using LCARS.Data
@inject PullRequestService pullRequestService

<Header Text="Pull Requests" />

<PullRequests Data="@pullRequests"/>

@code {
    private IEnumerable<PullRequest>? pullRequests;

    protected override async Task OnInitializedAsync()
    {
        var timer = new System.Threading.Timer(async (_) =>
        {
            await RefreshPullRequests();
            await InvokeAsync(StateHasChanged);
        }, null, 0, 10000);
    }

    private async Task RefreshPullRequests()
    {
        pullRequests = await pullRequestService.GetGitHubPullRequestsAsync();
    }
}